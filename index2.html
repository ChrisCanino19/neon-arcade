<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Neon Arcade</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Neon Arcade</h1>
    <nav>
      <button data-t="ttt">Tic Tac Toe</button>
      <button data-t="snake">Snake</button>
      <button data-t="brk">Breakout</button>
    </nav>
  </header>

  <main id="scene" class="placeholder"></main>

  <!-- Loader: fetch boot.js from Githack; includes a small inline fallback if external JS is blocked -->
  <script>
    (function () {
      var s = document.createElement('script');
      s.src = 'https://rawcdn.githack.com/ChrisCanino19/neon-arcade/main/boot.js?ts=' + Date.now();
      s.onerror = function () {
        // Fallback: minimal tab switching & placeholders (runs if external script is blocked)
        var scene = document.getElementById('scene');
        var buttons = document.querySelectorAll('nav button');
        var active = '';
        var cells = Array.from({ length: 9 }).map(function () {
          return '<div style="width:80px;height:80px;border-radius:12px;border:1px solid #7dfcff33;background:linear-gradient(135deg,#182247,#0f1633);box-shadow:inset 0 0 0 1px #ffffff0a;"></div>';
        }).join('');
        var grid = '<div style="display:grid;grid-template-columns:repeat(3,80px);gap:10px">' + cells + '</div>';

        var scenes = {
          ttt:
            '<div class="placeholder">' + grid + '</div>' +
            '<p class="note">Tic Tac Toe UI placeholder — logic arrives in Phase 2.</p>',
          snake:
            '<div class="placeholder"><canvas id="snake-canvas" width="640" height="360"></canvas></div>' +
            '<p class="note">Snake canvas placeholder — Phase 3.</p>',
          brk:
            '<div class="placeholder"><canvas id="breakout-canvas" width="640" height="360"></canvas></div>' +
            '<p class="note">Breakout canvas placeholder — Phase 4.</p>'
        };

        function setActive(which) {
          if (active === which) return;
          window.dispatchEvent(new CustomEvent('neon-arcade:stop-all'));
          active = which;
          scene.innerHTML = scenes[which];
          buttons.forEach(function (b) {
            var on = b.dataset.t === which;
            b.disabled = on;
            b.setAttribute('aria-pressed', on ? 'true' : 'false');
          });
        }

        buttons.forEach(function (b) {
          b.addEventListener('click', function () { setActive(b.dataset.t); });
        });

        document.addEventListener('keydown', function (e) {
          if (!['ArrowLeft', 'ArrowRight'].includes(e.key)) return;
          var order = ['ttt', 'snake', 'brk'];
          var i = order.indexOf(active);
          var next = e.key === 'ArrowRight'
            ? order[(i + 1) % order.length]
            : order[(i + order.length - 1) % order.length];
          setActive(next);
        });

        setActive('ttt');
      };
      document.head.appendChild(s);
    })();
  </script>
</body>
</html>
