;(function(g){const N="NeonArcadeSnake";let S=null,T=null,K=null;function R(n){return Math.random()*n|0}function mount(c){if(!c){console.warn("["+N+"] mount: missing container");return}unmount();const r=document.createElement("div");r.className="na-snake";r.innerHTML='<style>.na-snake{--txt:#e8f0ff;--muted:#9db0d3}.na-snake .hud{display:flex;justify-content:space-between;align-items:center;margin:8px 0}.na-snake .btn{padding:8px 12px;border-radius:10px;border:1px solid #ffffff55;background:#ffffff18;color:var(--txt);cursor:pointer}.na-snake canvas{display:block;width:640px;max-width:95%;height:auto;border:1px solid #ffffff22;border-radius:12px;background:#0e1738;box-shadow:inset 0 0 0 1px #ffffff0b,0 8px 30px #00e5ff22,0 0 30px #ff00e522}.na-snake .score{color:var(--muted)}</style><div>Use arrow keys. Press R to reset.</div><div class="hud"><button class="btn r">Reset</button><div class="score">Score: <b>0</b></div></div><canvas width="640" height="360"></canvas>';c.innerHTML="";c.appendChild(r);const cv=r.querySelector("canvas"),x=cv.getContext("2d"),bEl=r.querySelector(".score b"),reset=r.querySelector(".btn.r");const sz=16,cols=cv.width/sz|0,rows=cv.height/sz|0;let snake=[{x:cols/2|0,y:rows/2|0}],dir={x:1,y:0},food={x:R(cols),y:R(rows)},score=0,alive=true,spd=90;function drawCell(xc,yc,col){x.fillStyle=col;x.fillRect(xc*sz,yc*sz,sz-1,sz-1)}function resetGame(){snake=[{x:cols/2|0,y:rows/2|0}];dir={x:1,y:0};food={x:R(cols),y:R(rows)};score=0;alive=true;bEl.textContent=score}function step(){if(!alive)return;const head={x:(snake[0].x+dir.x+cols)%cols,y:(snake[0].y+dir.y+rows)%rows};if(snake.some(p=>p.x===head.x&&p.y===head.y)){alive=false;return}snake.unshift(head);if(head.x===food.x&&head.y===food.y){score++;bEl.textContent=score;food={x:R(cols),y:R(rows)}}else{snake.pop()}x.fillStyle="#0a112d";x.fillRect(0,0,cv.width,cv.height);drawCell(food.x,food.y,"#ffa600");for(let i=snake.length-1;i>=0;i--)drawCell(snake[i].x,snake[i].y,i?"#00e5ff":"#ff00e5")}K=e=>{const k=e.key;if(k==="ArrowLeft"&&dir.x!==1)dir={x:-1,y:0};else if(k==="ArrowRight"&&dir.x!==-1)dir={x:1,y:0};else if(k==="ArrowUp"&&dir.y!==1)dir={x:0,y:-1};else if(k==="ArrowDown"&&dir.y!==-1)dir={x:0,y:1};else if(k=="r")resetGame()};window.addEventListener("keydown",K);reset.addEventListener("click",resetGame);resetGame();T=setInterval(step,spd);const stop=()=>unmount();window.addEventListener("neon-arcade:stop-all",stop);S={container:c,root:r,stopListener:stop};return ()=>unmount()}function unmount(){if(!S)return;try{window.removeEventListener("keydown",K)}catch(e){}try{window.removeEventListener("neon-arcade:stop-all",S.stopListener)}catch(e){}if(T)clearInterval(T);if(S.container&&S.root&&S.root.parentNode===S.container)S.container.removeChild(S.root);S=null}g[N]={mount,unmount}})(window);
